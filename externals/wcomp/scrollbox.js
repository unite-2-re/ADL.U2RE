const t=()=>"currentCSSZoom"in document.documentElement?document.documentElement.currentCSSZoom||1:parseFloat(document.documentElement.style.getPropertyValue("--scaling"))||1;let e=t()||1;document.documentElement.addEventListener("scaling",(()=>{e=t()||1})),document.documentElement.addEventListener("resize",(()=>{e=t()||1})),document.documentElement.classList.contains("__exp-use-zoom")||document.documentElement.classList.add("__exp-use-zoom"),addEventListener("resize",(()=>{e=t()||1}));const o=()=>e||1,i=URL.createObjectURL(new Blob(['@property --percent-x{syntax: "<number>"; inherits: true; initial-value: 0;}@property --sb-color{syntax: "<color>"; inherits: true; initial-value: rgba(16,16,16,.2509803922);}@property --percent-y{syntax: "<number>"; inherits: true; initial-value: 0;}@property --thumbSize{syntax: "<number>"; inherits: true; initial-value: 0;}@property --sizeCoef{syntax: "<number>"; inherits: true; initial-value: 1;}@property --scroll-left{syntax: "<number>"; inherits: true; initial-value: 0;}@property --scroll-top{syntax: "<number>"; inherits: true; initial-value: 0;}@keyframes scroll-percent-x{0%{--percent-x: 0}to{--percent-x: 1}}@keyframes scroll-percent-y{0%{--percent-y: 0}to{--percent-y: 1}}@layer u2-scrollbox{:host(u-scrollbox){place-content:start;place-items:start;timeline-scope:--tm-x,--tm-y;display:grid;position:relative;overflow:hidden;inset:0;padding:0;box-sizing:border-box;grid-template-columns:minmax(0px,1fr) 1rem!important;grid-template-rows:minmax(0px,1fr) 1rem!important;inline-size:100%;block-size:100%;contain:strict!important;container-type:size!important;background-color:transparent;--percent-x: 0;--percent-y: 0;--sb-color: #10101040;rotate:none;scale:none;translate:none;transform:none;transform-origin:50% 50%;backface-visibility:visible;filter:none;backdrop-filter:none;will-change:auto;perspective:none;isolation:auto}:host(u-scrollbox):not([data-hidden]){display:grid!important}:host(u-scrollbox),:host(u-scrollbox)>:where(*){box-sizing:border-box;will-change:scroll-position,contents;touch-action:pan-x pan-y manipulation;pointer-events:auto}:host(u-scrollbox) :where(.content-box){scroll-timeline:--tm-x horizontal,--tm-y vertical;scroll-timeline:--tm-x inline,--tm-y block;overflow:scroll;display:block flow;scrollbar-gutter:stable both-edges!important;scrollbar-width:none!important;grid-row:1/2 span!important;grid-column:1/2 span!important;inline-size:100%!important;block-size:100%!important;will-change:contents,scroll-position}:host(u-scrollbox) :where(.scrollbar-x,.scrollbar-y){user-select:none;pointer-events:none;contain:none;container-type:normal;position:relative;display:block flow;inset:0;line-height:0px;background-color:transparent;touch-action:none;z-index:9999;inline-size:100%;block-size:100%}:host(u-scrollbox) :where(.scrollbar-x,.scrollbar-y) :where(.thumb){pointer-events:auto;position:static;display:block flow;line-height:0px;border-radius:.125rem;background-color:var(--sb-color, rgba(16, 16, 16, .2509803922));user-select:none;touch-action:none;cursor:grab}:host(u-scrollbox) :where(.scrollbar-x,.scrollbar-y) :where(.thumb):active{cursor:grabbing}:host(u-scrollbox) :is(.scrollbar-y){grid-row:1/1 span;grid-column:2/2 span;animation-name:scroll-percent-y;animation-timeline:--tm-y;animation-fill-mode:both;animation-duration:1ms;animation-delay:0ms;animation-timing-function:linear}:host(u-scrollbox) :is(.scrollbar-y) :where(.thumb){inline-size:100%;block-size:min(100% * var(--sizeCoef, 1),100%);translate:0px calc(var(--scroll-top) * var(--sizeCoef, 1) * 1px)}@supports (timeline-scope: --tm-x,--tm-y){:host(u-scrollbox) :is(.scrollbar-y) :where(.thumb){translate:0px calc(var(--percent-y) * (1 - var(--sizeCoef, 1)) * 100cqb)}}:host(u-scrollbox) :is(.scrollbar-x){grid-column:1/1 span;grid-row:2/2 span;animation-name:scroll-percent-y;animation-timeline:--tm-x;animation-fill-mode:both;animation-duration:1ms;animation-delay:0ms;animation-timing-function:linear}:host(u-scrollbox) :is(.scrollbar-x) :where(.thumb){block-size:100%;inline-size:min(100% * var(--sizeCoef, 1),100%);translate:calc(var(--scroll-left) * var(--sizeCoef, 1) * 1px) 0px}@supports (timeline-scope: --tm-x,--tm-y){:host(u-scrollbox) :is(.scrollbar-x) :where(.thumb){translate:calc(var(--percent-x) * (1 - var(--sizeCoef, 1)) * 100cqi) 0px}}}'],{type:"text/css"})),s=()=>crypto?.randomUUID?crypto?.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(t=>(+t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+t/4).toString(16))),r=new WeakMap,n=(t,e)=>{if(!r.has(t)){const o=[],i=new ResizeObserver((t=>{for(const e of t)if(e.borderBoxSize){const t=e.borderBoxSize[0];t&&o.forEach((e=>e?.(t,i)))}}));e?.({inlineSize:t.offsetWidth,blockSize:t.offsetHeight},i),r.set(t,o),i.observe(t,{box:"border-box"})}r.get(t)?.push(e)},l=new Map([]);requestAnimationFrame((async()=>{for(;;){for(const t of l.entries())t[1]?.(),l.delete(t[0]);try{await new Promise((t=>requestAnimationFrame(t)))}catch(t){break}}}));const a=(t,e)=>{l.set(t,e)},c=(t,e,o,i="")=>{if("attributeStyleMap"in t){const i=t.attributeStyleMap.get(e),s=i?.[0]??i?.value;(parseFloat(s)!=o&&s!=o||null==s)&&t.attributeStyleMap.set(e,o)}else{const s=t?.style?.getPropertyValue?.(e);(parseFloat(s)!=o&&s!=o||null==s)&&t?.style?.setProperty?.(e,o,i)}},p=Symbol(),h=Symbol();class m{scrollbar;holder;status;content;uuid="";uuid2="";uuid3="";constructor({holder:t,scrollbar:e,content:i},r=0){this.scrollbar=e,this.holder=t,this.content=i,this.uuid=s(),this.uuid2=s(),this.uuid3=s(),this.status={pointerLocation:0,virtualScroll:0,pointerId:-1};const l=(t=null)=>{a(this.uuid,(()=>{const t=Math.min(this.content[[p,h][r]]/this.content[["scrollWidth","scrollHeight"][r]],1);c(this.scrollbar,"--sizeCoef",t),c(this.scrollbar,"visibility",.999>t?"visible":"collapse","important")}))};this.scrollbar?.querySelector?.(".thumb")?.addEventListener?.("pointerdown",(t=>{0>this.status.pointerId&&(t?.stopPropagation?.(),t?.preventDefault?.(),this.status.pointerId=t.pointerId,this.status.pointerLocation=t[["clientX","clientY"][r]]/o(),this.status.virtualScroll=this.content[["scrollLeft","scrollTop"][r]])})),document.documentElement.addEventListener("pointermove",(t=>{if(t.pointerId==this.status.pointerId){t?.stopPropagation?.(),t?.preventDefault?.();const e=this.content[["scrollLeft","scrollTop"][r]],i=t[["clientX","clientY"][r]]/o();this.status.virtualScroll+=this.content[["scrollWidth","scrollHeight"][r]]/this.content[[p,h][r]]*(i-this.status.pointerLocation),this.status.pointerLocation=i;const s=this.status.virtualScroll-e;.001>Math.abs(s)||this.content.scrollBy({[["left","top"][r]]:s,behavior:"instant"})}}));const m=t=>{this.status.pointerId==t.pointerId&&(t?.stopPropagation?.(),t?.preventDefault?.(),this.status.virtualScroll=this.content[["scrollLeft","scrollTop"][r]],this.status.pointerId=-1,l())};document.documentElement.addEventListener("scaling",l),document.documentElement.addEventListener("click",l),document.documentElement.addEventListener("pointerup",m,{}),document.documentElement.addEventListener("pointercancel",m,{}),this.holder.addEventListener("pointerleave",l),this.holder.addEventListener("pointerenter",l),this.content.addEventListener("scroll",(t=>{a(this.uuid,(()=>{CSS.supports("timeline-scope","--tm-x, --tm-y")||(c(this.holder,"--scroll-top",this.content.scrollTop||"0"),c(this.holder,"--scroll-left",this.content.scrollLeft||"0"));const t=new CustomEvent("scroll-change",{detail:{scrollTop:this.content.scrollTop,scrollLeft:this.content.scrollLeft}});this.holder.dispatchEvent(t)}))})),n(this.content,(t=>{this.content[p]=t.inlineSize,this.content[h]=t.blockSize,l()})),addEventListener("resize",l),requestAnimationFrame(l)}}CSS?.registerProperty?.({name:"--percent",syntax:"<number>",inherits:1,initialValue:"0"}),CSS?.registerProperty?.({name:"--percent-y",syntax:"<number>",inherits:1,initialValue:"0"}),CSS?.registerProperty?.({name:"--percent-x",syntax:"<number>",inherits:1,initialValue:"0"});class b extends HTMLElement{static observedAttributes=["data-scroll-top","data-scroll-left"];constructor(){super();const t=this.attachShadow({mode:"open"}),e=(new DOMParser).parseFromString('<template>\r\n    <div class="scrollbar-x" part="scrollbar-x" draggable="false">\r\n        <div part="thumb-x" class="thumb" draggable="false"></div>\r\n    </div>\r\n    <div class="scrollbar-y" part="scrollbar-y" draggable="false">\r\n        <div part="thumb-y" class="thumb" draggable="false"></div>\r\n    </div>\r\n    <div class="content-box" part="content-box"><slot></slot></div>\r\n</template>\r\n',"text/html"),o=t.querySelector(".content-box");e.querySelector("template")?.content?.childNodes.forEach((e=>{t.appendChild(e.cloneNode(1))}));const s=document.createElement("style");if(s.innerHTML=`@import url("${i}");`,t.appendChild(s),this["@scrollbar-x"]=new m({holder:this,content:t.querySelector(".content-box"),scrollbar:t.querySelector(".scrollbar-x")},0),this["@scrollbar-y"]=new m({holder:this,content:t.querySelector(".content-box"),scrollbar:t.querySelector(".scrollbar-y")},1),this.dataset.scrollTop||this.dataset.scrollLeft){o?.scrollTo({top:parseFloat(this.dataset.scrollTop||"0")||0,left:parseFloat(this.dataset.scrollLeft||"0")||0,behavior:"instant"});const t=new CustomEvent("scroll-set",{detail:{scrollTop:this.dataset.scrollTop||0,scrollLeft:this.dataset.scrollLeft||0}});this.dispatchEvent(t)}}attributeChangedCallback(t){const e=this.shadowRoot?.querySelector(".content-box");if(t==this?.dataset.scrollTop){e?.scrollTo({top:parseFloat(this?.dataset.scrollTop||"0")||0,left:e?.scrollLeft||0,behavior:"instant"});const t=new CustomEvent("scroll-set",{detail:{scrollTop:parseFloat(this?.dataset.scrollTop||"0")||0,scrollLeft:parseFloat(this?.dataset.scrollLeft||"0")||0}});this.dispatchEvent(t)}if(t==this?.dataset.scrollLeft){e?.scrollTo({top:this.scrollTop||0,left:parseFloat(this?.dataset.scrollLeft||"0")||0,behavior:"instant"});const t=new CustomEvent("scroll-set",{detail:{scrollTop:parseFloat(this?.dataset.scrollTop||"0")||0,scrollLeft:parseFloat(this?.dataset.scrollLeft||"0")||0}});this.dispatchEvent(t)}}}customElements.define("u-scrollbox",b);export{s as UUIDv4,b as default,n as observeBorderBox};