var e="production"===process.env.NODE_ENV,n="Invariant failed";function r(r,t){if(!r){if(e)throw new Error(n);var a="function"==typeof t?t():t,o=a?"".concat(n,": ").concat(a):n;throw new Error(o)}}const t=Symbol("Option kind"),a=Symbol("Result kind");function o(e){const n={[Symbol.toStringTag]:"Option",[t]:"Some",isSome:()=>!0,isNone:()=>!1,isSomeAnd:n=>n(e),isSomeAndAsync:n=>n(e),expect:n=>e,unwrap:()=>e,unwrapOr:n=>e,unwrapOrElse:n=>e,unwrapOrElseAsync:n=>Promise.resolve(e),okOr:n=>s(e),okOrElse:n=>s(e),transpose(){const n=e;return f(n),n.isOk()?s(o(n.unwrap())):c(n.unwrapErr())},filter:r=>r(e)?n:i,flatten(){const n=e;return u(n),n},map:n=>o(n(e)),mapOr:(n,r)=>r(e),mapOrElse:(n,r)=>r(e),zip:n=>(u(n),n.isSome()?o([e,n.unwrap()]):i),zipWith:(n,r)=>(u(n),n.isSome()?o(r(e,n.unwrap())):i),unzip(){const n=e;if(!Array.isArray(n)||2!==n.length)throw new TypeError("Unzip format is incorrect.");const[r,t]=n;return[o(r),o(t)]},and:e=>(u(e),e),andThen:n=>n(e),andThenAsync:n=>n(e),or:e=>n,orElse:e=>n,orElseAsync:e=>Promise.resolve(n),xor:e=>(u(e),e.isSome()?i:n),inspect:r=>(r(e),n),eq:n=>(u(n),n.isSome()&&n.unwrap()===e),toString:()=>`Some(${e})`};return n}const i=Object.freeze({[Symbol.toStringTag]:"Option",[t]:"None",isSome:()=>!1,isNone:()=>!0,isSomeAnd:e=>!1,isSomeAndAsync:e=>Promise.resolve(!1),expect(e){throw new TypeError(e)},unwrap(){throw new TypeError("Called `Option::unwrap()` on a `None` value")},unwrapOr:e=>e,unwrapOrElse:e=>e(),unwrapOrElseAsync:e=>e(),okOr:e=>c(e),okOrElse:e=>c(e()),transpose:()=>s(i),filter:e=>i,flatten:()=>i,map:e=>i,mapOr:(e,n)=>e,mapOrElse:(e,n)=>e(),zip:e=>i,zipWith:(e,n)=>i,unzip:()=>[i,i],and:e=>i,andThen:e=>i,andThenAsync:e=>Promise.resolve(i),or:e=>(u(e),e),orElse:e=>e(),orElseAsync:e=>e(),xor:e=>(u(e),e.isSome()?e:i),inspect:e=>i,eq:e=>(u(e),e===i),toString:()=>"None"});function s(e){const n={[Symbol.toStringTag]:"Result",[a]:"Ok",isOk:()=>!0,isErr:()=>!1,isOkAnd:n=>n(e),isOkAndAsync:n=>n(e),isErrAnd:e=>!1,isErrAndAsync:e=>Promise.resolve(!1),expect:n=>e,unwrap:()=>e,unwrapOr:n=>e,unwrapOrElse:n=>e,unwrapOrElseAsync:n=>Promise.resolve(e),expectErr(n){throw new TypeError(`${n}: ${e}`)},unwrapErr(){throw new TypeError("Called `Result::unwrapErr()` on an `Ok` value")},ok:()=>o(e),err:()=>i,transpose(){const n=e;return u(n),n.isSome()?o(s(n.unwrap())):i},map:n=>s(n(e)),mapErr:n=>s(e),mapOr:(n,r)=>r(e),mapOrElse:(n,r)=>r(e),flatten(){const n=e;return f(n),n},and:e=>(f(e),e),or:e=>n,andThen:n=>n(e),andThenAsync:n=>n(e),orElse:e=>n,orElseAsync:e=>Promise.resolve(n),inspect:r=>(r(e),n),inspectErr:e=>n,eq:n=>(f(n),n.isOk()&&n.unwrap()===e),asOk:()=>n,asErr(){throw new TypeError("Called `Result::asErr()` on an `Ok` value")},toString:()=>`Ok(${e})`};return n}function c(e){const n={[Symbol.toStringTag]:"Result",[a]:"Err",isOk:()=>!1,isErr:()=>!0,isOkAnd:e=>!1,isOkAndAsync:e=>Promise.resolve(!1),isErrAnd:n=>n(e),isErrAndAsync:n=>n(e),expect(n){throw new TypeError(`${n}: ${e}`)},unwrap(){throw new TypeError("Called `Result::unwrap()` on an `Err` value")},unwrapOr:e=>e,unwrapOrElse:n=>n(e),unwrapOrElseAsync:n=>n(e),expectErr:n=>e,unwrapErr:()=>e,ok:()=>i,err:()=>o(e),transpose:()=>o(n),map:n=>c(e),mapErr:n=>c(n(e)),mapOr:(e,n)=>e,mapOrElse:(n,r)=>n(e),flatten:()=>n,and:e=>n,or:e=>(f(e),e),andThen:e=>n,andThenAsync:e=>Promise.resolve(n),orElse:n=>n(e),orElseAsync:n=>n(e),inspect:e=>n,inspectErr:r=>(r(e),n),eq:n=>(f(n),n.isErr()&&n.unwrapErr()===e),asOk(){throw new TypeError("Called `Result::asOk()` on an `Err` value")},asErr:()=>n,toString:()=>`Err(${e})`};return n}function u(e){if(!function(e){return null!=e&&"object"==typeof e&&t in e}(e))throw new TypeError(`This(${e}) is not an Option`)}function f(e){if(!function(e){return null!=e&&"object"==typeof e&&a in e}(e))throw new TypeError(`This(${e}) is not a Result`)}const l=s(!1),h=s(),d="AbortError",w="TimeoutError";class p extends Error{name="FetchError";status=0;constructor(e,n){super(e),this.status=n}}function y(e,n){"string"!=typeof e&&r(e instanceof URL,(()=>`Url must be a string or URL object but received ${e}.`));const{abortable:t=!1,responseType:a,timeout:o,onProgress:i,onChunk:u,...f}=n??{},l=null!=o;let h,d;l&&r("number"==typeof o&&o>0,(()=>`Timeout must be a number greater than 0 but received ${o}.`)),(t||l)&&(d=new AbortController,f.signal=d.signal);const y=fetch(e,f).then((async e=>{if(h?.(),!e.ok)return await(e.body?.cancel()),c(new p(e.statusText,e.status));if(e.body){const n="function"==typeof i,r="function"==typeof u;if(n||r){const[t,a]=e.body.tee(),o=t.getReader();let f=null,l=0;if(n){const n=e.headers.get("content-length")??e.headers.get("Content-Length");null==n?i(c(new Error("No content-length in response headers."))):f=parseInt(n,10)}o.read().then((function e({done:t,value:a}){t||(r&&u(a),n&&null!=f&&(l+=a.byteLength,i(s({totalByteLength:f,completedByteLength:l}))),o.read().then(e))})),e=new Response(a,{headers:e.headers,status:e.status,statusText:e.statusText})}}switch(a){case"arraybuffer":return s(await e.arrayBuffer());case"blob":return s(await e.blob());case"json":try{return s(await e.json())}catch{return c(new Error("Response is invalid json while responseType is json"))}case"text":return s(await e.text());default:return s(e)}})).catch((e=>(h?.(),c(e))));if(l){const e=setTimeout((()=>{if(!d.signal.aborted){const e=new Error;e.name=w,d.abort(e)}}),o);h=()=>{e&&clearTimeout(e),h=null}}return t?{abort(e){h?.(),d.abort(e)},get aborted(){return d.signal.aborted},get response(){return y}}:y}const g="NotFoundError",m="/",v=".",b="/tmp";function E(e){r("string"==typeof e,(()=>`Path must be a string but received ${e}`)),r(e[0]===m,(()=>`Path must start with / but received ${e}`))}function A(e){r("string"==typeof e,(()=>`File url must be a string but received ${e}`))}function T(e){if("string"!=typeof e)throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function k(e,n){if(e.length<=1)return e;let r=e.length;for(let t=e.length-1;t>0&&n(e.charCodeAt(t));t--)r=t;return e.slice(0,r)}function O(e){return 47===e}function x(e,n=""){!function(e,n){if(T(e),0===e.length)return e;if("string"!=typeof n)throw new TypeError(`Suffix must be a string. Received ${JSON.stringify(n)}`)}(e,n);const r=function(e,n,r=0){let t=!1,a=e.length;for(let o=e.length-1;o>=r;--o)if(n(e.charCodeAt(o))){if(t){r=o+1;break}}else t||(t=!0,a=o+1);return e.slice(r,a)}(e,O),t=k(r,O);return n?function(e,n){if(n.length>=e.length)return e;const r=e.length-n.length;for(let t=n.length-1;t>=0;--t)if(e.charCodeAt(r+t)!==n.charCodeAt(t))return e;return e.slice(0,-n.length)}(t,n):t}function S(e){!function(e){if(T(e),0===e.length);}(e);let n=-1,r=!1;for(let t=e.length-1;t>=1;--t)if(O(e.charCodeAt(t))){if(r){n=t;break}}else r=!0;return-1===n?O(e.charCodeAt(0))?"/":".":k(e.slice(0,n),O)}function $(e){T(e);let n=-1,r=0,t=-1,a=!0,o=0;for(let i=e.length-1;i>=0;--i){const s=e.charCodeAt(i);if(O(s)){if(!a){r=i+1;break}}else-1===t&&(a=!1,t=i+1),46===s?-1===n?n=i:1!==o&&(o=1):-1!==n&&(o=-1)}return-1===n||-1===t||0===o||1===o&&n===t-1&&n===r+1?"":e.slice(n,t)}function F(e){!function(e){if(T(e),0===e.length);}(e);const n=O(e.charCodeAt(0)),r=O(e.charCodeAt(e.length-1));return e=function(e,n,r,t){let a,o="",i=0,s=-1,c=0;for(let u=0;u<=e.length;++u){if(u<e.length)a=e.charCodeAt(u);else{if(t(a))break;a=47}if(t(a)){if(s===u-1||1===c);else if(s!==u-1&&2===c){if(o.length<2||2!==i||46!==o.charCodeAt(o.length-1)||46!==o.charCodeAt(o.length-2)){if(o.length>2){const e=o.lastIndexOf(r);-1===e?(o="",i=0):(o=o.slice(0,e),i=o.length-1-o.lastIndexOf(r)),s=u,c=0;continue}if(2===o.length||1===o.length){o="",i=0,s=u,c=0;continue}}n&&(o.length>0?o+=`${r}..`:o="..",i=2)}else o.length>0?o+=r+e.slice(s+1,u):o=e.slice(s+1,u),i=u-s-1;s=u,c=0}else 46===a&&-1!==c?++c:c=-1}return o}(e,!n,"/",O),0!==e.length||n||(e="."),e.length>0&&r&&(e+="/"),n?`/${e}`:e}function D(...e){if(0===e.length)return".";e.forEach((e=>T(e)));const n=e.filter((e=>e.length>0)).join("/");return""===n?".":F(n)}let C;function z(e){return e===m}async function L(e,n,r){try{return s(await e.getDirectoryHandle(n,r))}catch(r){const t=r,a=new Error(`${t.name}: ${t.message} When get child directory '${n}' from directory '${e.name||m}'.`);return a.name=t.name,c(a)}}async function M(e,n){let r=await async function(){return C??=await navigator.storage.getDirectory(),C}();if(z(e))return s(r);let t=e.slice(1);for(;t;){let e="";const a=t.indexOf("/");if(-1===a)e=t,t="";else if(e=t.slice(0,a),t=t.slice(a+1),0===a)continue;const o=await L(r,e,n);if(o.isErr())return o;r=o.unwrap()}return s(r)}async function R(e,n){const r=n?.create??!1,t=S(e),a=x(e);return(await M(t,{create:r})).andThenAsync((e=>async function(e,n,r){try{return s(await e.getFileHandle(n,r))}catch(r){const t=r,a=new Error(`${t.name}: ${t.message} When get child file '${n}' from directory '${e.name||m}'.`);return a.name=t.name,c(a)}}(e,a,{create:r})))}function U(e){return e.name===g}async function P(e){const n=(await Promise.all(e)).find((e=>e.isErr()));return n??h}function B(){const e=new Error;return e.name=d,e}function N(e){const{isDirectory:n=!1,basename:r="tmp",extname:t=""}=e??{},a=n?"":t;return D(b,`${r?`${r}-`:""}${crypto.randomUUID()}${a}`)}function j(e){return e.startsWith(`${b}/`)}async function W(e){const{name:n,kind:r}=e;if(I(e)){const t=await e.getFile(),{size:a,lastModified:o,type:i}=t;return{name:n,kind:r,type:i,size:a,lastModified:o}}return{name:n,kind:r}}function I(e){return"file"===e.kind}function q(e){return"directory"===e.kind}function J(e){return"file"===e.kind}async function H(e){const n=await e.getFile(),r=await n.arrayBuffer();return new Uint8Array(r)}async function V(e){E(e);return(await R(e,{create:!0})).and(h)}async function Y(e){E(e);return(await M(e,{create:!0})).and(h)}async function _(e,n){E(e);async function*r(t,a){const o=t.entries();for await(const[i,s]of o){const o=a===e?i:D(a,i);yield{path:o,handle:s},q(s)&&n?.recursive&&(yield*r(await t.getDirectoryHandle(i),o))}}return(await M(e)).andThen((n=>s(r(n,e))))}async function G(e,n){E(e);return(await R(e)).andThenAsync((async e=>{const r=await e.getFile();switch(n?.encoding){case"blob":return s(r);case"utf8":return s(await r.text());default:return s(await r.arrayBuffer())}}))}async function K(e){E(e);const n=S(e),r=x(e),t=await M(n);return(await t.andThenAsync((async e=>{try{z(n)&&z(r)?await e.remove({recursive:!0}):await e.removeEntry(r,{recursive:!0})}catch(e){return c(e)}return h}))).orElse((e=>U(e)?h:c(e)))}async function Q(e){E(e);const n=S(e),r=x(e),t=await M(n);return r?t.andThenAsync((async n=>{for await(const[e,t]of n.entries())if(e===r)return s(t);const t=new Error(`${g}: '${r}' does not exist. Full path is '${e}'.`);return t.name=g,c(t)})):t}async function X(e,n,r){E(e);const{append:t=!1,create:a=!0}=r??{};return(await R(e,{create:a})).andThenAsync((async e=>{const r=await e.createWritable({keepExistingData:t}),a={type:"write",data:n};if(t){const{size:n}=await e.getFile();a.position=n}return await r.write(a),await r.close(),h}))}function Z(e,n,r){A(e);let t=!1;"string"==typeof n?E(n):(r=n,n=N({extname:$(e)}),t=!0);let a=!1;const o=y(e,{redirect:"follow",...r,abortable:!0}),i=(async()=>(await o.response).andThenAsync((async e=>{const r=await e.blob();if(a)return c(B());return(await X(n,r)).and(s(e))})))();return{abort(e){a=!0,o.abort(e)},get aborted(){return a},get response(){return t?i.then((e=>e.map((e=>({tempFilePath:n,rawResponse:e}))))):i}}}async function ee(e,n){const r=S(n);return(await M(r,{create:!0})).andThenAsync((async r=>{const t=x(n);try{return await e.move(r,t),h}catch(e){return c(e)}}))}async function ne(e,n,r,t=!0){return E(n),(await Q(e)).andThenAsync((async a=>{let o=!1;const i=await Q(n);if(i.isErr()){if(!U(i.unwrapErr()))return i.asErr()}else{o=!0;const e=i.unwrap();if(!(I(a)&&I(e)||q(a)&&q(e)))return c(new Error("Both 'srcPath' and 'destPath' must both be a file or directory."))}if(I(a))return t||!o?await r(a,n):h;return(await _(e,{recursive:!0})).andThenAsync((async e=>{const a=[Y(n)];for await(const{path:i,handle:s}of e){const e=D(n,i);let c=!1;if(o){const n=await oe(e);if(n.isErr()){a.push(Promise.resolve(n.asErr()));continue}c=n.unwrap()}const u=I(s)?t||!c?r(s,e):Promise.resolve(h):Y(e);a.push(u)}return P(a)}))}))}function re(e,n){return X(e,n,{append:!0})}async function te(e,n,r){const{overwrite:t=!0}=r??{};return ne(e,n,(async(e,n)=>await X(n,await e.getFile())),t)}async function ae(e){const n=await _(e);if(n.isErr())return U(n.unwrapErr())?Y(e):n.asErr();const r=[];for await(const{path:t}of n.unwrap())r.push(K(D(e,t)));return P(r)}async function oe(e,n){const{isDirectory:t=!1,isFile:a=!1}=n??{};r(!(t&&a),(()=>"ExistsOptions.isDirectory and ExistsOptions.isFile must not be true together."));const o=await Q(e);return o.andThen((e=>s(!(t&&I(e)||a&&q(e))))).orElse((e=>U(e)?l:o.asErr()))}async function ie(e,n,r){const{overwrite:t=!0}=r??{};return(await ne(e,n,ee,t)).andThenAsync((()=>K(e)))}function se(e){return G(e,{encoding:"blob"})}async function ce(e){return(await ue(e)).andThenAsync((async e=>{try{return s(JSON.parse(e))}catch(e){return c(e)}}))}function ue(e){return G(e,{encoding:"utf8"})}async function fe(e){const{isDirectory:n=!1}=e??{},r=N(e);return(await(n?Y:V)(r)).and(s(r))}function le(){return K(b)}async function he(e){r(e instanceof Date,(()=>`Expired must be a Date but received ${e}`));return(await _(b,{recursive:!0})).andThenAsync((async n=>{try{for await(const{handle:r}of n)I(r)&&(await r.getFile()).lastModified<=e.getTime()&&await r.remove()}catch(e){return c(e)}return h}))}var de={},we=Uint8Array,pe=Uint16Array,ye=Int32Array,ge=new we([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),me=new we([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ve=new we([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),be=function(e,n){for(var r=new pe(31),t=0;t<31;++t)r[t]=n+=1<<e[t-1];var a=new ye(r[30]);for(t=1;t<30;++t)for(var o=r[t];o<r[t+1];++o)a[o]=o-r[t]<<5|t;return{b:r,r:a}},Ee=be(ge,2),Ae=Ee.b,Te=Ee.r;Ae[28]=258,Te[258]=28;for(var ke=be(me,0),Oe=ke.b,xe=ke.r,Se=new pe(32768),$e=0;$e<32768;++$e){var Fe=(43690&$e)>>1|(21845&$e)<<1;Fe=(61680&(Fe=(52428&Fe)>>2|(13107&Fe)<<2))>>4|(3855&Fe)<<4,Se[$e]=((65280&Fe)>>8|(255&Fe)<<8)>>1}var De=function(e,n,r){for(var t=e.length,a=0,o=new pe(n);a<t;++a)e[a]&&++o[e[a]-1];var i,s=new pe(n);for(a=1;a<n;++a)s[a]=s[a-1]+o[a-1]<<1;if(r){i=new pe(1<<n);var c=15-n;for(a=0;a<t;++a)if(e[a])for(var u=a<<4|e[a],f=n-e[a],l=s[e[a]-1]++<<f,h=l|(1<<f)-1;l<=h;++l)i[Se[l]>>c]=u}else for(i=new pe(t),a=0;a<t;++a)e[a]&&(i[a]=Se[s[e[a]-1]++]>>15-e[a]);return i},Ce=new we(288);for($e=0;$e<144;++$e)Ce[$e]=8;for($e=144;$e<256;++$e)Ce[$e]=9;for($e=256;$e<280;++$e)Ce[$e]=7;for($e=280;$e<288;++$e)Ce[$e]=8;var ze=new we(32);for($e=0;$e<32;++$e)ze[$e]=5;var Le=De(Ce,9,0),Me=De(Ce,9,1),Re=De(ze,5,0),Ue=De(ze,5,1),Pe=function(e){for(var n=e[0],r=1;r<e.length;++r)e[r]>n&&(n=e[r]);return n},Be=function(e,n,r){var t=n/8|0;return(e[t]|e[t+1]<<8)>>(7&n)&r},Ne=function(e,n){var r=n/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&n)},je=function(e){return(e+7)/8|0},We=function(e,n,r){return(null==n||n<0)&&(n=0),(null==r||r>e.length)&&(r=e.length),new we(e.subarray(n,r))},Ie=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],qe=function(e,n,r){var t=new Error(n||Ie[e]);if(t.code=e,Error.captureStackTrace&&Error.captureStackTrace(t,qe),!r)throw t;return t},Je=function(e,n,r,t){var a=e.length,o=t?t.length:0;if(!a||n.f&&!n.l)return r||new we(0);var i=!r,s=i||2!=n.i,c=n.i;i&&(r=new we(3*a));var u=function(e){var n=r.length;if(e>n){var t=new we(Math.max(2*n,e));t.set(r),r=t}},f=n.f||0,l=n.p||0,h=n.b||0,d=n.l,w=n.d,p=n.m,y=n.n,g=8*a;do{if(!d){f=Be(e,l,1);var m=Be(e,l+1,3);if(l+=3,!m){var v=e[(D=je(l)+4)-4]|e[D-3]<<8,b=D+v;if(b>a){c&&qe(0);break}s&&u(h+v),r.set(e.subarray(D,b),h),n.b=h+=v,n.p=l=8*b,n.f=f;continue}if(1==m)d=Me,w=Ue,p=9,y=5;else if(2==m){var E=Be(e,l,31)+257,A=Be(e,l+10,15)+4,T=E+Be(e,l+5,31)+1;l+=14;for(var k=new we(T),O=new we(19),x=0;x<A;++x)O[ve[x]]=Be(e,l+3*x,7);l+=3*A;var S=Pe(O),$=(1<<S)-1,F=De(O,S,1);for(x=0;x<T;){var D,C=F[Be(e,l,$)];if(l+=15&C,(D=C>>4)<16)k[x++]=D;else{var z=0,L=0;for(16==D?(L=3+Be(e,l,3),l+=2,z=k[x-1]):17==D?(L=3+Be(e,l,7),l+=3):18==D&&(L=11+Be(e,l,127),l+=7);L--;)k[x++]=z}}var M=k.subarray(0,E),R=k.subarray(E);p=Pe(M),y=Pe(R),d=De(M,p,1),w=De(R,y,1)}else qe(1);if(l>g){c&&qe(0);break}}s&&u(h+131072);for(var U=(1<<p)-1,P=(1<<y)-1,B=l;;B=l){var N=(z=d[Ne(e,l)&U])>>4;if((l+=15&z)>g){c&&qe(0);break}if(z||qe(2),N<256)r[h++]=N;else{if(256==N){B=l,d=null;break}var j=N-254;if(N>264){var W=ge[x=N-257];j=Be(e,l,(1<<W)-1)+Ae[x],l+=W}var I=w[Ne(e,l)&P],q=I>>4;I||qe(3),l+=15&I;R=Oe[q];if(q>3){W=me[q];R+=Ne(e,l)&(1<<W)-1,l+=W}if(l>g){c&&qe(0);break}s&&u(h+131072);var J=h+j;if(h<R){var H=o-R,V=Math.min(R,J);for(H+h<0&&qe(3);h<V;++h)r[h]=t[H+h]}for(;h<J;++h)r[h]=r[h-R]}}n.l=d,n.p=B,n.b=h,n.f=f,d&&(f=1,n.m=p,n.d=w,n.n=y)}while(!f);return h!=r.length&&i?We(r,0,h):r.subarray(0,h)},He=function(e,n,r){r<<=7&n;var t=n/8|0;e[t]|=r,e[t+1]|=r>>8},Ve=function(e,n,r){r<<=7&n;var t=n/8|0;e[t]|=r,e[t+1]|=r>>8,e[t+2]|=r>>16},Ye=function(e,n){for(var r=[],t=0;t<e.length;++t)e[t]&&r.push({s:t,f:e[t]});var a=r.length,o=r.slice();if(!a)return{t:en,l:0};if(1==a){var i=new we(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort((function(e,n){return e.f-n.f})),r.push({s:-1,f:25001});var s=r[0],c=r[1],u=0,f=1,l=2;for(r[0]={s:-1,f:s.f+c.f,l:s,r:c};f!=a-1;)s=r[r[u].f<r[l].f?u++:l++],c=r[u!=f&&r[u].f<r[l].f?u++:l++],r[f++]={s:-1,f:s.f+c.f,l:s,r:c};var h=o[0].s;for(t=1;t<a;++t)o[t].s>h&&(h=o[t].s);var d=new pe(h+1),w=_e(r[f-1],d,0);if(w>n){t=0;var p=0,y=w-n,g=1<<y;for(o.sort((function(e,n){return d[n.s]-d[e.s]||e.f-n.f}));t<a;++t){var m=o[t].s;if(!(d[m]>n))break;p+=g-(1<<w-d[m]),d[m]=n}for(p>>=y;p>0;){var v=o[t].s;d[v]<n?p-=1<<n-d[v]++-1:++t}for(;t>=0&&p;--t){var b=o[t].s;d[b]==n&&(--d[b],++p)}w=n}return{t:new we(d),l:w}},_e=function(e,n,r){return-1==e.s?Math.max(_e(e.l,n,r+1),_e(e.r,n,r+1)):n[e.s]=r},Ge=function(e){for(var n=e.length;n&&!e[--n];);for(var r=new pe(++n),t=0,a=e[0],o=1,i=function(e){r[t++]=e},s=1;s<=n;++s)if(e[s]==a&&s!=n)++o;else{if(!a&&o>2){for(;o>138;o-=138)i(32754);o>2&&(i(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(i(a),--o;o>6;o-=6)i(8304);o>2&&(i(o-3<<5|8208),o=0)}for(;o--;)i(a);o=1,a=e[s]}return{c:r.subarray(0,t),n:n}},Ke=function(e,n){for(var r=0,t=0;t<n.length;++t)r+=e[t]*n[t];return r},Qe=function(e,n,r){var t=r.length,a=je(n+2);e[a]=255&t,e[a+1]=t>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var o=0;o<t;++o)e[a+o+4]=r[o];return 8*(a+4+t)},Xe=function(e,n,r,t,a,o,i,s,c,u,f){He(n,f++,r),++a[256];for(var l=Ye(a,15),h=l.t,d=l.l,w=Ye(o,15),p=w.t,y=w.l,g=Ge(h),m=g.c,v=g.n,b=Ge(p),E=b.c,A=b.n,T=new pe(19),k=0;k<m.length;++k)++T[31&m[k]];for(k=0;k<E.length;++k)++T[31&E[k]];for(var O=Ye(T,7),x=O.t,S=O.l,$=19;$>4&&!x[ve[$-1]];--$);var F,D,C,z,L=u+5<<3,M=Ke(a,Ce)+Ke(o,ze)+i,R=Ke(a,h)+Ke(o,p)+i+14+3*$+Ke(T,x)+2*T[16]+3*T[17]+7*T[18];if(c>=0&&L<=M&&L<=R)return Qe(n,f,e.subarray(c,c+u));if(He(n,f,1+(R<M)),f+=2,R<M){F=De(h,d,0),D=h,C=De(p,y,0),z=p;var U=De(x,S,0);He(n,f,v-257),He(n,f+5,A-1),He(n,f+10,$-4),f+=14;for(k=0;k<$;++k)He(n,f+3*k,x[ve[k]]);f+=3*$;for(var P=[m,E],B=0;B<2;++B){var N=P[B];for(k=0;k<N.length;++k){var j=31&N[k];He(n,f,U[j]),f+=x[j],j>15&&(He(n,f,N[k]>>5&127),f+=N[k]>>12)}}}else F=Le,D=Ce,C=Re,z=ze;for(k=0;k<s;++k){var W=t[k];if(W>255){Ve(n,f,F[(j=W>>18&31)+257]),f+=D[j+257],j>7&&(He(n,f,W>>23&31),f+=ge[j]);var I=31&W;Ve(n,f,C[I]),f+=z[I],I>3&&(Ve(n,f,W>>5&8191),f+=me[I])}else Ve(n,f,F[W]),f+=D[W]}return Ve(n,f,F[256]),f+D[256]},Ze=new ye([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),en=new we(0),nn=function(e,n,r,t,a,o){var i=o.z||e.length,s=new we(t+i+5*(1+Math.ceil(i/7e3))+a),c=s.subarray(t,s.length-a),u=o.l,f=7&(o.r||0);if(n){f&&(c[0]=o.r>>3);for(var l=Ze[n-1],h=l>>13,d=8191&l,w=(1<<r)-1,p=o.p||new pe(32768),y=o.h||new pe(w+1),g=Math.ceil(r/3),m=2*g,v=function(n){return(e[n]^e[n+1]<<g^e[n+2]<<m)&w},b=new ye(25e3),E=new pe(288),A=new pe(32),T=0,k=0,O=o.i||0,x=0,S=o.w||0,$=0;O+2<i;++O){var F=v(O),D=32767&O,C=y[F];if(p[D]=C,y[F]=D,S<=O){var z=i-O;if((T>7e3||x>24576)&&(z>423||!u)){f=Xe(e,c,0,b,E,A,k,x,$,O-$,f),x=T=k=0,$=O;for(var L=0;L<286;++L)E[L]=0;for(L=0;L<30;++L)A[L]=0}var M=2,R=0,U=d,P=D-C&32767;if(z>2&&F==v(O-P))for(var B=Math.min(h,z)-1,N=Math.min(32767,O),j=Math.min(258,z);P<=N&&--U&&D!=C;){if(e[O+M]==e[O+M-P]){for(var W=0;W<j&&e[O+W]==e[O+W-P];++W);if(W>M){if(M=W,R=P,W>B)break;var I=Math.min(P,W-2),q=0;for(L=0;L<I;++L){var J=O-P+L&32767,H=J-p[J]&32767;H>q&&(q=H,C=J)}}}P+=(D=C)-(C=p[D])&32767}if(R){b[x++]=268435456|Te[M]<<18|xe[R];var V=31&Te[M],Y=31&xe[R];k+=ge[V]+me[Y],++E[257+V],++A[Y],S=O+M,++T}else b[x++]=e[O],++E[e[O]]}}for(O=Math.max(O,S);O<i;++O)b[x++]=e[O],++E[e[O]];f=Xe(e,c,u,b,E,A,k,x,$,O-$,f),u||(o.r=7&f|c[f/8|0]<<3,f-=7,o.h=y,o.p=p,o.i=O,o.w=S)}else{for(O=o.w||0;O<i+u;O+=65535){var _=O+65535;_>=i&&(c[f/8|0]=u,_=i),f=Qe(c,f+1,e.subarray(O,_))}o.i=i}return We(s,0,t+je(f)+a)},rn=function(){for(var e=new Int32Array(256),n=0;n<256;++n){for(var r=n,t=9;--t;)r=(1&r&&-306674912)^r>>>1;e[n]=r}return e}(),tn=function(e,n,r,t,a){if(!a&&(a={l:1},n.dictionary)){var o=n.dictionary.subarray(-32768),i=new we(o.length+e.length);i.set(o),i.set(e,o.length),e=i,a.w=o.length}return nn(e,null==n.level?6:n.level,null==n.mem?a.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+n.mem,r,t,a)},an=function(e,n){var r={};for(var t in e)r[t]=e[t];for(var t in n)r[t]=n[t];return r},on=function(e,n,r){for(var t=e(),a=e.toString(),o=a.slice(a.indexOf("[")+1,a.lastIndexOf("]")).replace(/\s+/g,"").split(","),i=0;i<t.length;++i){var s=t[i],c=o[i];if("function"==typeof s){n+=";"+c+"=";var u=s.toString();if(s.prototype)if(-1!=u.indexOf("[native code]")){var f=u.indexOf(" ",8)+1;n+=u.slice(f,u.indexOf("(",f))}else for(var l in n+=u,s.prototype)n+=";"+c+".prototype."+l+"="+s.prototype[l].toString();else n+=u}else r[c]=s}return n},sn=[],cn=function(e,n,r,t){if(!sn[r]){for(var a="",o={},i=e.length-1,s=0;s<i;++s)a=on(e[s],a,o);sn[r]={c:on(e[i],a,o),e:o}}var c=an({},sn[r].e);return function(e,n,r,t,a){var o=new Worker(de[n]||(de[n]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return o.onmessage=function(e){var n=e.data,r=n.$e$;if(r){var t=new Error(r[0]);t.code=r[1],t.stack=r[2],a(t,null)}else a(null,n)},o.postMessage(r,t),o}(sn[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+n.toString()+"}",r,c,function(e){var n=[];for(var r in e)e[r].buffer&&n.push((e[r]=new e[r].constructor(e[r])).buffer);return n}(c),t)},un=function(){return[we,pe,ye,ge,me,ve,Ae,Oe,Me,Ue,Se,Ie,De,Pe,Be,Ne,je,We,qe,Je,vn,ln,hn]},fn=function(){return[we,pe,ye,ge,me,ve,Te,xe,Le,Ce,Re,ze,Se,Ze,en,De,He,Ve,Ye,_e,Ge,Ke,Qe,Xe,je,We,nn,tn,mn,ln]},ln=function(e){return postMessage(e,[e.buffer])},hn=function(e){return e&&{out:e.size&&new we(e.size),dictionary:e.dictionary}},dn=function(e,n,r,t,a,o){var i=cn(r,t,a,(function(e,n){i.terminate(),o(e,n)}));return i.postMessage([e,n],n.consume?[e.buffer]:[]),function(){i.terminate()}},wn=function(e,n){return e[n]|e[n+1]<<8},pn=function(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24)>>>0},yn=function(e,n){return pn(e,n)+4294967296*pn(e,n+4)},gn=function(e,n,r){for(;r;++n)e[n]=r,r>>>=8};function mn(e,n){return tn(e,n||{},0,0)}function vn(e,n){return Je(e,{i:2},n&&n.out,n&&n.dictionary)}var bn=function(e,n,r,t){for(var a in e){var o=e[a],i=n+a,s=t;Array.isArray(o)&&(s=an(t,o[1]),o=o[0]),o instanceof we?r[i]=[o,s]:(r[i+="/"]=[new we(0),s],bn(o,i,r,t))}},En="undefined"!=typeof TextEncoder&&new TextEncoder,An="undefined"!=typeof TextDecoder&&new TextDecoder;try{An.decode(en,{stream:!0})}catch(e){}function Tn(e,n){if(En)return En.encode(e);for(var r=e.length,t=new we(e.length+(e.length>>1)),a=0,o=function(e){t[a++]=e},i=0;i<r;++i){if(a+5>t.length){var s=new we(a+8+(r-i<<1));s.set(t),t=s}var c=e.charCodeAt(i);c<128||n?o(c):c<2048?(o(192|c>>6),o(128|63&c)):c>55295&&c<57344?(o(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++i))>>18),o(128|c>>12&63),o(128|c>>6&63),o(128|63&c)):(o(224|c>>12),o(128|c>>6&63),o(128|63&c))}return We(t,0,a)}function kn(e,n){if(n){for(var r="",t=0;t<e.length;t+=16384)r+=String.fromCharCode.apply(null,e.subarray(t,t+16384));return r}if(An)return An.decode(e);var a=function(e){for(var n="",r=0;;){var t=e[r++],a=(t>127)+(t>223)+(t>239);if(r+a>e.length)return{s:n,r:We(e,r-1)};a?3==a?(t=((15&t)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,n+=String.fromCharCode(55296|t>>10,56320|1023&t)):n+=1&a?String.fromCharCode((31&t)<<6|63&e[r++]):String.fromCharCode((15&t)<<12|(63&e[r++])<<6|63&e[r++]):n+=String.fromCharCode(t)}}(e),o=a.s;return(r=a.r).length&&qe(8),o}var On=function(e,n){for(;1!=wn(e,n);n+=4+wn(e,n+2));return[yn(e,n+12),yn(e,n+4),yn(e,n+20)]},xn=function(e){var n=0;if(e)for(var r in e){var t=e[r].length;t>65535&&qe(9),n+=t+4}return n},Sn=function(e,n,r,t,a,o,i,s){var c=t.length,u=r.extra,f=s&&s.length,l=xn(u);gn(e,n,null!=i?33639248:67324752),n+=4,null!=i&&(e[n++]=20,e[n++]=r.os),e[n]=20,n+=2,e[n++]=r.flag<<1|(o<0&&8),e[n++]=a&&8,e[n++]=255&r.compression,e[n++]=r.compression>>8;var h=new Date(null==r.mtime?Date.now():r.mtime),d=h.getFullYear()-1980;if((d<0||d>119)&&qe(10),gn(e,n,d<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>1),n+=4,-1!=o&&(gn(e,n,r.crc),gn(e,n+4,o<0?-o-2:o),gn(e,n+8,r.size)),gn(e,n+12,c),gn(e,n+14,l),n+=16,null!=i&&(gn(e,n,f),gn(e,n+6,r.attrs),gn(e,n+10,i),n+=14),e.set(t,n),n+=c,l)for(var w in u){var p=u[w],y=p.length;gn(e,n,+w),gn(e,n+2,y),e.set(p,n+4),n+=4+y}return f&&(e.set(s,n),n+=f),n};function $n(e,n,r){r||(r=n,n={}),"function"!=typeof r&&qe(7);var t={};bn(e,"",t,n);var a=Object.keys(t),o=a.length,i=0,s=0,c=o,u=new Array(o),f=[],l=function(){for(var e=0;e<f.length;++e)f[e]()},h=function(e,n){Fn((function(){r(e,n)}))};Fn((function(){h=r}));var d=function(){var e=new we(s+22),n=i,r=s-i;s=0;for(var t=0;t<c;++t){var a=u[t];try{var o=a.c.length;Sn(e,s,a,a.f,a.u,o);var f=30+a.f.length+xn(a.extra),l=s+f;e.set(a.c,l),Sn(e,i,a,a.f,a.u,o,s,a.m),i+=16+f+(a.m?a.m.length:0),s=l+o}catch(e){return h(e,null)}}!function(e,n,r,t,a){gn(e,n,101010256),gn(e,n+8,r),gn(e,n+10,r),gn(e,n+12,t),gn(e,n+16,a)}(e,i,u.length,r,n),h(null,e)};o||d();for(var w=function(e){var n=a[e],r=t[n],c=r[0],w=r[1],p=function(){var e=-1;return{p:function(n){for(var r=e,t=0;t<n.length;++t)r=rn[255&r^n[t]]^r>>>8;e=r},d:function(){return~e}}}(),y=c.length;p.p(c);var g=Tn(n),m=g.length,v=w.comment,b=v&&Tn(v),E=b&&b.length,A=xn(w.extra),T=0==w.level?0:8,k=function(r,t){if(r)l(),h(r,null);else{var a=t.length;u[e]=an(w,{size:y,crc:p.d(),c:t,f:g,m:b,u:m!=n.length||b&&v.length!=E,compression:T}),i+=30+m+A+a,s+=76+2*(m+A)+(E||0)+a,--o||d()}};if(m>65535&&k(qe(11,0,1),null),T)if(y<16e4)try{k(null,mn(c,w))}catch(e){k(e,null)}else f.push(function(e,n,r){return r||(r=n,n={}),"function"!=typeof r&&qe(7),dn(e,n,[fn],(function(e){return ln(mn(e.data[0],e.data[1]))}),0,r)}(c,w,k));else k(null,c)},p=0;p<c;++p)w(p);return l}var Fn="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(e){e()};function Dn(e,n,r){r||(r=n,n={}),"function"!=typeof r&&qe(7);var t=[],a=function(){for(var e=0;e<t.length;++e)t[e]()},o={},i=function(e,n){Fn((function(){r(e,n)}))};Fn((function(){i=r}));for(var s=e.length-22;101010256!=pn(e,s);--s)if(!s||e.length-s>65558)return i(qe(13,0,1),null),a;var c=wn(e,s+8);if(c){var u=c,f=pn(e,s+16),l=4294967295==f||65535==u;if(l){var h=pn(e,s-12);(l=101075792==pn(e,h))&&(u=c=pn(e,h+32),f=pn(e,h+48))}for(var d=n&&n.filter,w=function(n){var r=function(e,n,r){var t=wn(e,n+28),a=kn(e.subarray(n+46,n+46+t),!(2048&wn(e,n+8))),o=n+46+t,i=pn(e,n+20),s=r&&4294967295==i?On(e,o):[i,pn(e,n+24),pn(e,n+42)],c=s[0],u=s[1],f=s[2];return[wn(e,n+10),c,u,a,o+wn(e,n+30)+wn(e,n+32),f]}(e,f,l),s=r[0],u=r[1],h=r[2],w=r[3],p=r[4],y=r[5],g=function(e,n){return n+30+wn(e,n+26)+wn(e,n+28)}(e,y);f=p;var m=function(e,n){e?(a(),i(e,null)):(n&&(o[w]=n),--c||i(null,o))};if(!d||d({name:w,size:u,originalSize:h,compression:s}))if(s)if(8==s){var v=e.subarray(g,g+u);if(h<524288||u>.8*h)try{m(null,vn(v,{out:new we(h)}))}catch(e){m(e,null)}else t.push(function(e,n,r){return r||(r=n,n={}),"function"!=typeof r&&qe(7),dn(e,n,[un],(function(e){return ln(vn(e.data[0],hn(e.data[1])))}),1,r)}(v,{size:h},m))}else m(qe(14,"unknown compression type "+s,1),null);else m(null,We(e,g,g+u));else m(null,null)},p=0;p<u;++p)w()}else i(null,{});return a}class Cn{resolve;reject;promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}async function zn(e,n){const r=new Uint8Array(e),t=new Cn;return Dn(r,(async(e,r)=>{if(e)return void t.resolve(c(e));const a=[];for(const e in r)"/"!==e.at(-1)&&a.push(X(D(n,e),r[e]));t.resolve(P(a))})),await t.promise}async function Ln(e,n){E(n);return(await G(e)).andThenAsync((e=>zn(e,n)))}async function Mn(e,n,r){A(e),E(n);return(await y(e,{redirect:"follow",...r,responseType:"arraybuffer",abortable:!1})).andThenAsync((e=>zn(e,n)))}function Rn(e,n,r){A(n);let t,a=!1;const o=(async()=>(await se(e)).andThenAsync((async o=>{if(a)return c(B());const{filename:i=x(e),...s}=r??{},u=new FormData;return u.append(i,o,i),t=y(n,{method:"POST",...s,abortable:!0,body:u}),t.response})))();return{abort(e){a=!0,t?.abort(e)},get aborted(){return a},get response(){return o}}}async function Un(e,n){const r=new Cn;return $n(e,{consume:!0},(async(e,t)=>{if(e)r.resolve(c(e));else if(n){const e=await X(n,t);r.resolve(e)}else r.resolve(s(t))})),await r.promise}async function Pn(e,n,r){"string"==typeof n?E(n):(r=n,n=void 0);return(await Q(e)).andThenAsync((async t=>{const a=x(e),o={};if(I(t)){const e=await H(t);o[a]=e}else{const n=await _(e,{recursive:!0});if(n.isErr())return n.asErr();const t=r?.preserveRoot??!0;for await(const{path:e,handle:r}of n.unwrap())if(I(r)){const n=t?D(a,e):e,i=await H(r);o[n]=i}}return Un(o,n)}))}async function Bn(e,n,r){A(e),"string"==typeof n?E(n):(r=n,n=void 0);return(await y(e,{redirect:"follow",...r,responseType:"arraybuffer",abortable:!1})).andThenAsync((r=>{const t={};return t[x(e)]=new Uint8Array(r),Un(t,n)}))}function Nn(){return"function"==typeof navigator?.storage?.getDirectory}function jn(e){return e?{name:e.name,message:e.message}:e}async function Wn(e){const n=await e.arrayBuffer();return{name:e.name,type:e.type,lastModified:e.lastModified,size:n.byteLength,data:n}}let In=1e3;var qn=(e=>(e[e.createFile=0]="createFile",e[e.mkdir=1]="mkdir",e[e.move=2]="move",e[e.readDir=3]="readDir",e[e.remove=4]="remove",e[e.stat=5]="stat",e[e.writeFile=6]="writeFile",e[e.appendFile=7]="appendFile",e[e.copy=8]="copy",e[e.emptyDir=9]="emptyDir",e[e.exists=10]="exists",e[e.deleteTemp=11]="deleteTemp",e[e.mkTemp=12]="mkTemp",e[e.pruneTemp=13]="pruneTemp",e[e.readBlobFile=14]="readBlobFile",e[e.unzip=15]="unzip",e[e.zip=16]="zip",e))(qn||{});let Jn,Hn;function Vn(e){const n=JSON.stringify(e);return(Jn??=new TextEncoder,Jn).encode(n)}function Yn(e){const n=_n(e);return JSON.parse(n)}function _n(e){return(Hn??=new TextDecoder,Hn).decode(e)}class Gn{i32a;u8a;headerLength=16;maxDataLength;constructor(e){this.i32a=new Int32Array(e),this.u8a=new Uint8Array(e),this.maxDataLength=e.byteLength-this.headerLength}}function Kn(e,n){const{i32a:r,u8a:t,headerLength:a,maxDataLength:o}=e,i=n.byteLength;if(i>o)throw new RangeError(`Request is too large: ${i} > ${o}. Consider grow the size of SharedArrayBuffer.`);Atomics.store(r,0,1),r[2]=i,t.set(n,a),Atomics.store(r,1,1),function(e){const n=Date.now();for(;!e();)if(Date.now()-n>In){const e=new Error("Operating Timeout");throw e.name=w,e}}((()=>0===Atomics.load(r,0)));const s=r[2];return t.slice(a,a+s)}async function Qn(e,n){const{i32a:r,u8a:t,headerLength:a,maxDataLength:o}=e;for(;1!==Atomics.load(r,1););const i=r[2],s=t.slice(a,a+i);let c=await n(s);const u=c.byteLength;if(u>o){const e=`Response is too large: ${u} > ${o}. Consider grow the size of SharedArrayBuffer.`;if(c=Vn([{name:"RangeError",message:e}]),c.byteLength>o)throw Atomics.store(r,1,0),new RangeError(e)}r[2]=c.byteLength,t.set(c,a),Atomics.store(r,1,0),Atomics.store(r,0,0)}const Xn={[qn.createFile]:V,[qn.mkdir]:Y,[qn.move]:ie,[qn.readDir]:_,[qn.remove]:K,[qn.stat]:Q,[qn.writeFile]:X,[qn.appendFile]:re,[qn.copy]:te,[qn.emptyDir]:ae,[qn.exists]:oe,[qn.deleteTemp]:le,[qn.mkTemp]:fe,[qn.pruneTemp]:he,[qn.readBlobFile]:se,[qn.unzip]:Ln,[qn.zip]:Pn};let Zn,er;function nr(){if("undefined"!=typeof window)throw new Error("Only can use in worker");if(Zn)throw new Error("Worker messenger already started");addEventListener("message",(e=>{const n=e.data;if(!(n instanceof SharedArrayBuffer))throw new TypeError("Only can post SharedArrayBuffer to Worker");Zn=new Gn(n),postMessage(!0),async function(){for(;;)try{await Qn(Zn,(async e=>{const[n,...r]=Yn(e);let t;n===qn.writeFile||n===qn.appendFile?Array.isArray(r[1])&&(r[1]=new Uint8Array(r[1])):n===qn.pruneTemp&&(r[0]=new Date(r[0]));const a=Xn[n];try{const e=await a(...r);if(e.isErr())t=Vn([jn(e.unwrapErr())]);else{let r;if(n===qn.readBlobFile){const n=e.unwrap(),t=await Wn(n);r={...t,data:[...new Uint8Array(t.data)]}}else if(n===qn.readDir){const n=e.unwrap(),t=[];for await(const{path:e,handle:r}of n){const n=await W(r);t.push({path:e,handle:n})}r=t}else if(n===qn.stat){const n=e.unwrap();r=await W(n)}else if(n===qn.zip){const n=e.unwrap();r=n instanceof Uint8Array?[...n]:n}else r=e.unwrap();t=Vn([null,r])}}catch(e){t=Vn([jn(e)])}return t}))}catch(e){console.error(e instanceof Error?e.stack:e)}}()}))}function rr(e){if("undefined"==typeof window)throw new Error("Only can use in main thread");if(er)throw new Error("Main messenger already started");return new Promise((n=>{const{worker:t,bufferLength:a=1048576,opTimeout:o=1e3}=e;r(t instanceof Worker||t instanceof URL||"string"==typeof t&&t,(()=>"worker must be Worker or valid URL(string)")),r(a>16&&a%4==0,(()=>"bufferLength must be a multiple of 4")),r(Number.isInteger(o)&&o>0,(()=>"opTimeout must be integer and greater than 0")),In=o;const i=t instanceof Worker?t:new Worker(t),s=new SharedArrayBuffer(a);i.addEventListener("message",(e=>{e.data&&(er=new Gn(s),n())})),i.postMessage(s)}))}function tr(e,...n){if(!er)return c(new Error("Worker not initialized. Come back later."));const r=Vn([e,...n]);try{const e=Yn(Kn(er,r)),n=e[0],t=n?c(function(e){const n=new Error(e.message);return n.name=e.name,n}(n)):s(e[1]??void 0);return t}catch(e){return c(e)}}function ar(e){return tr(qn.createFile,e)}function or(e){return tr(qn.mkdir,e)}function ir(e,n,r){return tr(qn.move,e,n,r)}function sr(e,n){return tr(qn.readDir,e,n)}function cr(e,n){return tr(qn.readBlobFile,e).map((e=>{const r=new Uint8Array(e.data);switch(e.data=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength),n?.encoding){case"blob":return e;case"utf8":return _n(new Uint8Array(e.data));default:return e.data}}))}function ur(e){return tr(qn.remove,e)}function fr(e){return tr(qn.stat,e)}function lr(e){return e instanceof ArrayBuffer?[...new Uint8Array(e)]:ArrayBuffer.isView(e)?[...new Uint8Array(e.buffer)]:e}function hr(e,n,r){return tr(qn.writeFile,e,lr(n),r)}function dr(e,n){return tr(qn.appendFile,e,lr(n))}function wr(e,n,r){return tr(qn.copy,e,n,r)}function pr(e){return tr(qn.emptyDir,e)}function yr(e,n){return tr(qn.exists,e,n)}function gr(){return tr(qn.deleteTemp)}function mr(e){return tr(qn.mkTemp,e)}function vr(e){return tr(qn.pruneTemp,e)}function br(e){return cr(e,{encoding:"blob"})}function Er(e){return Ar(e).andThen((e=>{try{return s(JSON.parse(e))}catch(e){return c(e)}}))}function Ar(e){return cr(e,{encoding:"utf8"})}function Tr(e,n){return tr(qn.unzip,e,n)}function kr(e,n,r){return tr(qn.zip,e,n,r).map((e=>e?new Uint8Array(e):e))}export{d as ABORT_ERROR,v as CURRENT_DIR,g as NOT_FOUND_ERROR,m as ROOT_DIR,w as TIMEOUT_ERROR,b as TMP_DIR,re as appendFile,dr as appendFileSync,E as assertAbsolutePath,A as assertFileUrl,rr as connectSyncAgent,te as copy,wr as copySync,V as createFile,ar as createFileSync,le as deleteTemp,gr as deleteTempSync,Z as downloadFile,ae as emptyDir,pr as emptyDirSync,oe as exists,yr as existsSync,N as generateTempPath,H as getFileDataByHandle,q as isDirectoryHandle,I as isFileHandle,J as isFileHandleLike,Nn as isOPFSSupported,j as isTempPath,fe as mkTemp,mr as mkTempSync,Y as mkdir,or as mkdirSync,ie as move,ir as moveSync,he as pruneTemp,vr as pruneTempSync,se as readBlobFile,br as readBlobFileSync,_ as readDir,sr as readDirSync,G as readFile,cr as readFileSync,ce as readJsonFile,Er as readJsonFileSync,ue as readTextFile,Ar as readTextFileSync,K as remove,ur as removeSync,nr as startSyncAgent,Q as stat,fr as statSync,W as toFileSystemHandleLike,Ln as unzip,Mn as unzipFromUrl,Tr as unzipSync,Rn as uploadFile,X as writeFile,hr as writeFileSync,Pn as zip,Bn as zipFromUrl,kr as zipSync};
